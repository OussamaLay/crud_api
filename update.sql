CREATE TABLE book (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, author VARCHAR(255) NOT NULL, summary VARCHAR(255) DEFAULT NULL, year INT DEFAULT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
CREATE TABLE refresh_tokens (id INT AUTO_INCREMENT NOT NULL, refresh_token VARCHAR(128) NOT NULL, username VARCHAR(255) NOT NULL, valid DATETIME NOT NULL, UNIQUE INDEX UNIQ_9BACE7E1C74F2195 (refresh_token), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
CREATE TABLE connection_history (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, is_sso TINYINT(1) NOT NULL, ip VARCHAR(255) DEFAULT NULL, user_agent VARCHAR(255) DEFAULT NULL, token_value VARCHAR(255) NOT NULL, browser_name VARCHAR(255) DEFAULT NULL, browser_version VARCHAR(255) DEFAULT NULL, browser_engine_name VARCHAR(255) DEFAULT NULL, browser_engine_version VARCHAR(255) DEFAULT NULL, operating_system_name VARCHAR(255) DEFAULT NULL, operating_system_version VARCHAR(255) DEFAULT NULL, device_model VARCHAR(255) DEFAULT NULL, device_version VARCHAR(255) DEFAULT NULL, device_brand VARCHAR(255) DEFAULT NULL, device_type VARCHAR(255) DEFAULT NULL, is_mobile TINYINT(1) DEFAULT NULL, is_touch TINYINT(1) DEFAULT NULL, login_date DATETIME NOT NULL, last_action_date DATETIME NOT NULL, INDEX IDX_5CB09668A76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `user` (id INT AUTO_INCREMENT NOT NULL, firstname VARCHAR(255) NOT NULL, lastname VARCHAR(255) NOT NULL, encoder VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, anonymous TINYINT(1) NOT NULL, last_login DATE DEFAULT NULL, username VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', uuid CHAR(36) NOT NULL COMMENT '(DC2Type:uuid)', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
ALTER TABLE connection_history ADD CONSTRAINT FK_5CB09668A76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id);
